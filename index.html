<!doctypehtml><meta charset=UTF-8><title>Cookifier (Browser Version)</title><style>body{font-family:system-ui,sans-serif;background:#111;color:#eee;text-align:center;padding:2em}button,input[type=file]{margin:10px;padding:10px 20px;border:none;border-radius:8px;font-size:16px}button{background:#3a7;color:#fff;cursor:pointer}button:hover{background:#4b8}progress{width:80%;margin-top:20px;height:20px}</style><p>Select your image and original <code>cookieclicker.zip</code><p>Image:</p><input id=imageInput accept=image/* type=file><br><p>Cookie Clicker:</p><input id=zipInput accept=.zip type=file><br><p>Filename (.zip):</p><input id=filenameinput><br><button id=processBtn>Cookify!</button><br><progress hidden id=progress max=100 value=0></progress><p id=status></p><script src=https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js></script><script>async function imageToCanvas(e){const t=URL.createObjectURL(e),n=await new Promise(((e,n)=>{const a=new Image;a.onload=()=>e(a),a.onerror=n,a.src=t})),a=document.createElement("canvas");a.width=n.width,a.height=n.height;return a.getContext("2d").drawImage(n,0,0),URL.revokeObjectURL(t),a}function resizeCanvas(e,t,n){const a=document.createElement("canvas");a.width=t,a.height=n;const i=a.getContext("2d");return i.imageSmoothingQuality="high",i.drawImage(e,0,0,t,n),a}document.getElementById("processBtn").onclick=async()=>{const e=document.getElementById("imageInput").files[0],t=document.getElementById("zipInput").files[0],n=document.getElementById("progress"),a=document.getElementById("status");if(!e||!t)return void alert("Please select both an image and a ZIP file first!");a.textContent="Processing...",n.hidden=!1,n.value=0;const i=await imageToCanvas(e),o=new JSZip,s=await o.loadAsync(t),c=new JSZip,g=new Set;let l=0;const m=Object.keys(s.files).length;for(const[e,t]of Object.entries(s.files)){let a;if(t.dir)continue;const o=e.split(".").pop().toLowerCase(),s=e.startsWith("img/")&&["png","jpg","jpeg","bmp","webp"].includes(o);try{if(s){const e=await t.async("blob"),n=await createImageBitmap(e),s=resizeCanvas(i,n.width,n.height);a=await new Promise((e=>s.toBlob(e,"png"===o?"image/png":"image/jpeg")))}else a=await t.async("blob")}catch{a=await t.async("blob")}g.has(e)||(c.file(e,a),g.add(e)),l++,n.value=l/m*100}function d(e,t,n,a=1,o=1){const s=resizeCanvas(i,t,n);if(a>1||o>1){const i=document.createElement("canvas");i.width=t*a,i.height=n*o;const g=i.getContext("2d");for(let e=0;e<o;e++)for(let i=0;i<a;i++)g.drawImage(s,i*t,e*n);c.file(e,i.toDataURL("image/png").split(",")[1],{base64:!0})}else c.file(e,s.toDataURL("image/png").split(",")[1],{base64:!0})}d("img/empty.png",256,256),d("img/icons.png",48,48,36,37),d("img/buildings.png",64,64,4,21),d("img/storeTile.jpg",300,256,1,1);const r=await c.generateAsync({type:"blob"}),p=URL.createObjectURL(r),u=document.createElement("a");u.href=p,filename=document.getElementById("filenameinput").value,u.download=filename+".zip",u.click(),a.textContent="Cookified ZIP ready for download!",n.hidden=!0,URL.revokeObjectURL(p)};</script>